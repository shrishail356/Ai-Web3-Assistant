import{t as S,C as At,u as Rt,w as Xs,U as kt,x as Mt,L as Bt,A as me,y as Je,z as Zs,B as ge,D as B,F as Ye,G as pe,I as Lt,J as qt,K as en,M as Nt,N as Le,O as ye,Q as Ot,R as ht,W as Qe,X as Xe,Y as jt,Z as ue,$ as de,a0 as Dt,a1 as mt,a2 as Ft,a3 as Ht,a4 as tn,a5 as sn,a6 as Ut,a7 as $t,a8 as J,_ as nn,a9 as Ue,aa as le,ab as fe,ac as Gt,ad as Vt,ae as be,af as Ze,ag as $e,ah as zt,e as et,ai as we,aj as Ge,ak as Wt,al as Kt,am as tt,an as st,ao as K,ap as Jt,aq as Yt,ar as an,as as rn,at as Qt,au as on,av as Xt,aw as j,ax as N,ay as Y,az as Zt,b as es,aA as ts,aB as Q,aC as Ve,aD as U,f as w,aE as ss,aF as cn,aG as ns,aH as X,m as as,n as rs,i as _e,aI as os,aJ as is,aK as A,aL as cs,aM as V,aN as x,aO as un,aP as us,aQ as dn,aR as ds,aS as ls,aT as fs,aU as hs,aV as ms,aW as ze,aX as gs,aY as ps,aZ as ln,a_ as ys,a$ as bs,b0 as ws,l as _s,b1 as Es,b2 as fn,b3 as hn,b4 as mn,b5 as gn,b6 as pn,b7 as yn,b8 as nt,b9 as vs,ba as Ts,bb as bn,bc as Ee,bd as xs,be as wn,bf as Ps,bg as Ss,bh as Is,bi as We,bj as at,bk as Cs,bl as As,bm as _n,bn as En,bo as vn,bp as Tn,bq as xn,br as Pn,bs as Sn,bt as In,bu as Cn,bv as An,bw as Rn,bx as kn,by as Mn,bz as Bn,bA as Ln,bB as qn,bC as Nn,bD as On,bE as jn,bF as Dn,bG as Fn,bH as Hn,bI as Un,bJ as $n,bK as Gn,bL as Vn,bM as zn,bN as Wn,bO as Kn,bP as Jn,bQ as Yn,bR as Qn,bS as Xn,H as Zn,bT as ea,bU as ta,bV as sa,bW as na,bX as aa,bY as ra,bZ as oa,b_ as ia,b$ as ca,c0 as ua,c1 as da,c2 as la,c3 as fa,c4 as ha,c5 as ma,c6 as ga,c7 as pa,c8 as ya,c9 as ba,ca as wa,cb as _a,cc as Ea,cd as va,ce as Ta,cf as xa,cg as Pa,ch as Sa,ci as Ia,cj as Ca,ck as Aa,cl as Ra,cm as ka,cn as Ma,co as Ba,cp as La,cq as qa,cr as Na,cs as Oa,ct as ja,cu as Da,cv as Fa,cw as Ha,cx as Ua,cy as $a,cz as Ga,cA as Va,cB as za,cC as Wa,cD as Ka,cE as Ja,cF as Ya,cG as Qa,cH as Xa,cI as Za,cJ as er,cK as tr,cL as sr,cM as nr,cN as ar,cO as rr,cP as or,cQ as ir,cR as cr,cS as ur,cT as dr,cU as lr,cV as fr,cW as hr,cX as mr,d as gr,cY as pr,cZ as yr,c_ as br,c$ as wr,d0 as _r,d1 as Er,d2 as vr,d3 as Tr,d4 as xr,d5 as Pr,d6 as Sr,d7 as Ir,d8 as Cr,d9 as Ar,da as Rr,db as kr,dc as Mr,dd as Br,de as Lr,df as qr,dg as Nr,dh as Or,di as jr,dj as Dr,dk as Fr,dl as gt,dm as ne,dn as Hr,dp as Ur,dq as $r,dr as Gr,ds as Vr,dt as zr,du as Wr,dv as Kr,dw as Jr,dx as Yr,dy as Qr,dz as Xr,dA as Zr,dB as eo,dC as to,dD as so,dE as no,dF as ao,dG as ro,dH as oo,dI as io,dJ as co,dK as uo,dL as lo,dM as fo,dN as ho,dO as mo,dP as go,dQ as po,dR as yo,dS as bo,dT as wo,dU as _o,dV as Eo,dW as vo,dX as To,dY as xo,dZ as Po,d_ as So,d$ as Io,e0 as Co,e1 as Ao,e2 as Ro,e3 as ko,e4 as Mo,e5 as Bo,e6 as Lo,e7 as qo,e8 as No,e9 as Oo,ea as jo,eb as Do,ec as Fo,ed as Ho,ee as Uo,ef as $o,eg as Go,eh as Vo,ei as zo,ej as Wo,ek as Ko,el as Jo,em as Yo,en as Qo,eo as Xo,ep as Zo,eq as ei,er as ti,es as si,et as ni,eu as ai,ev as ri,ew as oi,ex as ii,ey as ci,ez as ui,eA as di,eB as li,eC as fi,eD as hi,eE as mi,eF as gi,eG as pi,eH as yi,eI as bi,eJ as wi,eK as _i,eL as Ei,eM as vi,eN as Ti,eO as xi,eP as Pi,eQ as Si,eR as Ii,eS as Ci,eT as Ai,eU as Ri,eV as ki,eW as Mi,eX as Bi,eY as Li,eZ as qi,e_ as Ni,e$ as Oi,f0 as ji,f1 as Di,f2 as Fi,f3 as Hi,f4 as Ui,f5 as $i,f6 as Gi,f7 as Vi,f8 as zi,f9 as Wi,fa as Ki,fb as Ji,fc as pt,fd as Yi,fe as Qi,ff as Xi,fg as Zi,s as ec,fh as tc,fi as yt,fj as sc,fk as nc,fl as ac,fm as rc,fn as oc,fo as ic,fp as cc,o as I,fq as uc,g as dc}from"./index-BqU-fIN7.js";import{d as lc}from"./index-NIQLFPaM.js";import{ccipRequest as bt,offchainLookup as fc,offchainLookupAbiItem as hc,offchainLookupSignature as mc}from"./ccip-DmuQ340J.js";import{e as gc}from"./events-CLKvu5tX.js";function pc(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const r=Object.getOwnPropertyDescriptor(s,a);r&&Object.defineProperty(e,a,r.get?r:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}async function yc(e,{chain:t}){const{id:n,name:s,nativeCurrency:a,rpcUrls:r,blockExplorers:o}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:S(n),chainName:s,nativeCurrency:a,rpcUrls:r.default.http,blockExplorerUrls:o?Object.values(o).map(({url:i})=>i):void 0}]},{dedupe:!0,retryCount:0})}function rt({chain:e,currentChainId:t}){if(!e)throw new At;if(t!==e.id)throw new Rt({chain:e,currentChainId:t})}function bc(e,{docsPath:t,...n}){const s=(()=>{const a=Xs(e,n);return a instanceof kt?e:a})();return new Mt(s,{docsPath:t,...n})}const qe=new Bt(128);async function ot(e,t){var _,b,v,P;const{account:n=e.account,chain:s=e.chain,accessList:a,authorizationList:r,blobs:o,data:i,gas:c,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:d,value:l,...g}=t;if(typeof n>"u")throw new me({docsPath:"/docs/actions/wallet/sendTransaction"});const p=n?ye(n):null;try{Je(t);const y=await(async()=>{if(t.to)return t.to;if(r&&r.length>0)return await Zs({authorization:r[0]}).catch(()=>{throw new ge("`to` is required. Could not infer from `authorizationList`.")})})();if((p==null?void 0:p.type)==="json-rpc"||p===null){let E;s!==null&&(E=await B(e,Ye,"getChainId")({}),rt({currentChainId:E,chain:s}));const T=(v=(b=(_=e.chain)==null?void 0:_.formatters)==null?void 0:b.transactionRequest)==null?void 0:v.format,R=(T||pe)({...Lt(g,{format:T}),accessList:a,authorizationList:r,blobs:o,chainId:E,data:i,from:p==null?void 0:p.address,gas:c,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:d,to:y,value:l}),W=qe.get(e.uid),Qs=W?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:Qs,params:[R]},{retryCount:0})}catch(ft){if(W===!1)throw ft;const F=ft;if(F.name==="InvalidInputRpcError"||F.name==="InvalidParamsRpcError"||F.name==="MethodNotFoundRpcError"||F.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[R]},{retryCount:0}).then(Me=>(qe.set(e.uid,!0),Me)).catch(Me=>{const Be=Me;throw Be.name==="MethodNotFoundRpcError"||Be.name==="MethodNotSupportedRpcError"?(qe.set(e.uid,!1),F):Be});throw F}}if((p==null?void 0:p.type)==="local"){const E=await B(e,qt,"prepareTransactionRequest")({account:p,accessList:a,authorizationList:r,blobs:o,chain:s,data:i,gas:c,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:d,nonceManager:p.nonceManager,parameters:[...en,"sidecars"],value:l,...g,to:y}),T=(P=s==null?void 0:s.serializers)==null?void 0:P.transaction,C=await p.signTransaction(E,{serializer:T});return await B(e,Nt,"sendRawTransaction")({serializedTransaction:C})}throw(p==null?void 0:p.type)==="smart"?new Le({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Le({docsPath:"/docs/actions/wallet/sendTransaction",type:p==null?void 0:p.type})}catch(y){throw y instanceof Le?y:bc(y,{...t,account:p,chain:t.chain||void 0})}}function wc(e,t){const{abi:n,args:s,bytecode:a,...r}=t,o=Ot({abi:n,args:s,bytecode:a});return ot(e,{...r,data:o})}function _c(e){let t;if(typeof e=="string")t=ht(e);else{const n=Qe(e),s=e.length;for(let a=0;a<s;a++){const r=e[a];if(!Xe(r)){t=ht(r,n);break}}}if(!t)throw new jt({signature:e});return t}function Ec(e){let t;if(typeof e=="string")t=ue(e,{modifiers:de});else{const n=Qe(e),s=e.length;for(let a=0;a<s;a++){const r=e[a];if(!Xe(r)){t=ue(r,{modifiers:de,structs:n});break}}}if(!t)throw new Dt({param:e});return t}function vc(e){const t=[];if(typeof e=="string"){const n=mt(e),s=n.length;for(let a=0;a<s;a++)t.push(ue(n[a],{modifiers:de}))}else{const n=Qe(e),s=e.length;for(let a=0;a<s;a++){const r=e[a];if(Xe(r))continue;const o=mt(r),i=o.length;for(let c=0;c<i;c++)t.push(ue(o[c],{modifiers:de,structs:n}))}}if(t.length===0)throw new Ft({params:e});return t}async function Tc(e){return e.request({method:`${e.mode}_dumpState`})}async function xc(e,{address:t}){await e.request({method:`${e.mode}_impersonateAccount`,params:[t]})}async function Pc(e,{seconds:t}){return await e.request({method:"evm_increaseTime",params:[S(t)]})}async function Sc(e,{state:t}){await e.request({method:`${e.mode}_loadState`,params:[t]})}async function Ic(e,{blocks:t,interval:n}){e.mode==="ganache"?await e.request({method:"evm_mine",params:[{blocks:S(t)}]}):await e.request({method:`${e.mode}_mine`,params:[S(t),S(n||0)]})}async function Cc(e){var n;return((n=e.account)==null?void 0:n.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(s=>Ht(s))}async function Ac(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}function Rc({chains:e,id:t}){return e.find(n=>n.id===t)}const Ne=new Map;async function kc(e){const{getSocket:t,keepAlive:n=!0,key:s="socket",reconnect:a=!0,url:r}=e,{interval:o=3e4}=typeof n=="object"?n:{},{attempts:i=5,delay:c=2e3}=typeof a=="object"?a:{};let u=Ne.get(`${s}:${r}`);if(u)return u;let m=0;const{schedule:f}=tn({id:`${s}:${r}`,fn:async()=>{const l=new Map,g=new Map;let p,_,b;async function v(){const P=await t({onClose(){var y,E;for(const T of l.values())(y=T.onError)==null||y.call(T,new J({url:r}));for(const T of g.values())(E=T.onError)==null||E.call(T,new J({url:r}));l.clear(),g.clear(),a&&m<i&&setTimeout(async()=>{m++,await v().catch(console.error)},c)},onError(y){var E,T;p=y;for(const C of l.values())(E=C.onError)==null||E.call(C,p);for(const C of g.values())(T=C.onError)==null||T.call(C,p);l.clear(),g.clear(),a&&m<i&&setTimeout(async()=>{m++,await v().catch(console.error)},c)},onOpen(){p=void 0,m=0},onResponse(y){const E=y.method==="eth_subscription",T=E?y.params.subscription:y.id,C=E?g:l,R=C.get(T);R&&R.onResponse(y),E||C.delete(T)}});return _=P,n&&(b&&clearInterval(b),b=setInterval(()=>{var y;return(y=_.ping)==null?void 0:y.call(_)},o)),P}return await v(),p=void 0,u={close(){b&&clearInterval(b),_.close(),Ne.delete(`${s}:${r}`)},get socket(){return _},request({body:P,onError:y,onResponse:E}){p&&y&&y(p);const T=P.id??sn.take(),C=R=>{var W;typeof R.id=="number"&&T!==R.id||(P.method==="eth_subscribe"&&typeof R.result=="string"&&g.set(R.result,{onResponse:C,onError:y}),P.method==="eth_unsubscribe"&&g.delete((W=P.params)==null?void 0:W[0]),E(R))};l.set(T,{onResponse:C,onError:y});try{_.request({body:{jsonrpc:"2.0",id:T,...P}})}catch(R){y==null||y(R)}},requestAsync({body:P,timeout:y=1e4}){return Ut(()=>new Promise((E,T)=>this.request({body:P,onError:T,onResponse:E})),{errorInstance:new $t({body:P,url:r}),timeout:y})},requests:l,subscriptions:g,url:r},Ne.set(`${s}:${r}`,u),[u]}}),[h,[d]]=await f();return d}async function ce(e,t={}){const{keepAlive:n,reconnect:s}=t;return kc({async getSocket({onClose:a,onError:r,onOpen:o,onResponse:i}){const c=await nn(()=>import("./native-CJ5et6AR.js"),[]).then(d=>d.WebSocket),u=new c(e);function m(){a(),u.removeEventListener("close",m),u.removeEventListener("message",f),u.removeEventListener("error",r),u.removeEventListener("open",o)}function f({data:d}){i(JSON.parse(d))}u.addEventListener("close",m),u.addEventListener("message",f),u.addEventListener("error",r),u.addEventListener("open",o),u.readyState===c.CONNECTING&&await new Promise((d,l)=>{u&&(u.onopen=d,u.onerror=l)});const{close:h}=u;return Object.assign(u,{close(){h.bind(u)(),a()},ping(){try{if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new Ue({url:u.url,cause:new J({url:u.url})});const d={jsonrpc:"2.0",method:"net_version",params:[]};u.send(JSON.stringify(d))}catch(d){r(d)}},request({body:d}){if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new Ue({body:d,url:u.url,cause:new J({url:u.url})});return u.send(JSON.stringify(d))}})},keepAlive:n,reconnect:s,url:e})}async function Mc(e){const t=await ce(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}function Bc(e){const{abi:t,data:n}=e,s=le(n,0,4),a=t.find(r=>r.type==="function"&&s===fe(Gt(r)));if(!a)throw new Vt(s,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:a.name,args:"inputs"in a&&a.inputs&&a.inputs.length>0?be(a.inputs,le(n,4)):void 0}}const Oe="/docs/contract/encodeErrorResult";function Lc(e){const{abi:t,errorName:n,args:s}=e;let a=t[0];if(n){const c=Ze({abi:t,args:s,name:n});if(!c)throw new $e(n,{docsPath:Oe});a=c}if(a.type!=="error")throw new $e(void 0,{docsPath:Oe});const r=Gt(a),o=fe(r);let i="0x";if(s&&s.length>0){if(!a.inputs)throw new zt(a.name,{docsPath:Oe});i=et(a.inputs,s)}return we([o,i])}const je="/docs/contract/encodeFunctionResult";function qc(e){const{abi:t,functionName:n,result:s}=e;let a=t[0];if(n){const o=Ze({abi:t,name:n});if(!o)throw new Ge(n,{docsPath:je});a=o}if(a.type!=="function")throw new Ge(void 0,{docsPath:je});if(!a.outputs)throw new Wt(a.name,{docsPath:je});let r=Array.isArray(s)?s:[s];return a.outputs.length===0&&!r[0]&&(r=[]),et(a.outputs,r)}function Nc(e,t){if(e.length!==t.length)throw new Kt({expectedLength:e.length,givenLength:t.length});const n=[];for(let s=0;s<e.length;s++){const a=e[s],r=t[s];n.push(Rs(a,r))}return we(n)}function Rs(e,t,n=!1){if(e==="address"){const o=t;if(!tt(o))throw new st({address:o});return K(o.toLowerCase(),{size:n?32:null})}if(e==="string")return Jt(t);if(e==="bytes")return t;if(e==="bool")return K(Yt(t),{size:n?32:1});const s=e.match(an);if(s){const[o,i,c="256"]=s,u=Number.parseInt(c)/8;return S(t,{size:n?32:u,signed:i==="int"})}const a=e.match(rn);if(a){const[o,i]=a;if(Number.parseInt(i)!==(t.length-2)/2)throw new Qt({expectedSize:Number.parseInt(i),givenSize:(t.length-2)/2});return K(t,{dir:"right",size:n?32:null})}const r=e.match(on);if(r&&Array.isArray(t)){const[o,i]=r,c=[];for(let u=0;u<t.length;u++)c.push(Rs(i,t[u],!0));return c.length===0?"0x":we(c)}throw new Xt(e)}function Ke(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}function Oc(e){return e.opcode==="CREATE2"?Ms(e):ks(e)}function ks(e){const t=j(N(e.from));let n=j(e.nonce);return n[0]===0&&(n=new Uint8Array([])),N(`0x${Y(Zt([t,n],"bytes")).slice(26)}`)}function Ms(e){const t=j(N(e.from)),n=K(Ke(e.salt)?e.salt:j(e.salt),{size:32}),s="bytecodeHash"in e?Ke(e.bytecodeHash)?e.bytecodeHash:j(e.bytecodeHash):Y(e.bytecode,"bytes");return N(le(Y(es([j("0xff"),t,n,s])),12))}function it(e,t="hex"){const n=(()=>{if(typeof e=="string"){if(e.length>3&&e.length%2!==0)throw new ts(e);return Q(e)}return e})(),s=Ve(n,{recursiveReadLimit:Number.POSITIVE_INFINITY});return Bs(s,t)}function Bs(e,t="hex"){if(e.bytes.length===0)return t==="hex"?U(e.bytes):e.bytes;const n=e.readByte();if(n<128&&e.decrementPosition(1),n<192){const a=wt(e,n,128),r=e.readBytes(a);return t==="hex"?U(r):r}const s=wt(e,n,192);return jc(e,s,t)}function wt(e,t,n){if(n===128&&t<128)return 1;if(t<=n+55)return t-n;if(t===n+55+1)return e.readUint8();if(t===n+55+2)return e.readUint16();if(t===n+55+3)return e.readUint24();if(t===n+55+4)return e.readUint32();throw new ge("Invalid RLP prefix")}function jc(e,t,n){const s=e.position,a=[];for(;e.position-s<t;)a.push(Bs(e,n));return a}function Ls(e){return w(e)&&ss(e)===32}function Dc(e,t){const n=t||"hex",s=cn(w(e,{strict:!1})?j(e):e);return n==="bytes"?s:ns(s)}async function qs({message:e,signature:t}){return X({hash:as(e),signature:t})}async function Ns(e){const{domain:t,message:n,primaryType:s,signature:a,types:r}=e;return X({hash:rs({domain:t,message:n,primaryType:s,types:r}),signature:a})}async function Fc({address:e,hash:t,signature:n}){return _e(N(e),await X({hash:t,signature:n}))}async function Hc({address:e,message:t,signature:n}){return _e(N(e),await qs({message:t,signature:n}))}async function Uc(e){const{address:t,domain:n,message:s,primaryType:a,signature:r,types:o}=e;return _e(N(t),await Ns({domain:n,message:s,primaryType:a,signature:r,types:o}))}function $c(e){if(!os(e))return{signature:e};const[t,n,s]=be([{type:"address"},{type:"bytes"},{type:"bytes"}],e);return{address:t,data:n,signature:s}}function Os(e){const t=is(e,0,1);if(t==="0x04")return"eip7702";if(t==="0x03")return"eip4844";if(t==="0x02")return"eip1559";if(t==="0x01")return"eip2930";if(t!=="0x"&&A(t)>=192)return"legacy";throw new cs({serializedType:t})}function js(e){const t=Os(e);return t==="eip1559"?zc(e):t==="eip2930"?Wc(e):t==="eip4844"?Vc(e):t==="eip7702"?Gc(e):Kc(e)}function Gc(e){const t=ve(e),[n,s,a,r,o,i,c,u,m,f,h,d,l]=t;if(t.length!==10&&t.length!==13)throw new V({attributes:{chainId:n,nonce:s,maxPriorityFeePerGas:a,maxFeePerGas:r,gas:o,to:i,value:c,data:u,accessList:m,authorizationList:f,...t.length>9?{v:h,r:d,s:l}:{}},serializedTransaction:e,type:"eip7702"});const g={chainId:A(n),type:"eip7702"};return w(i)&&i!=="0x"&&(g.to=i),w(o)&&o!=="0x"&&(g.gas=x(o)),w(u)&&u!=="0x"&&(g.data=u),w(s)&&s!=="0x"&&(g.nonce=A(s)),w(c)&&c!=="0x"&&(g.value=x(c)),w(r)&&r!=="0x"&&(g.maxFeePerGas=x(r)),w(a)&&a!=="0x"&&(g.maxPriorityFeePerGas=x(a)),m.length!==0&&m!=="0x"&&(g.accessList=Te(m)),f.length!==0&&f!=="0x"&&(g.authorizationList=Jc(f)),un(g),{...t.length===13?Z(t):void 0,...g}}function Vc(e){const t=ve(e),n=t.length===4,s=n?t[0]:t,a=n?t.slice(1):[],[r,o,i,c,u,m,f,h,d,l,g,p,_,b]=s,[v,P,y]=a;if(!(s.length===11||s.length===14))throw new V({attributes:{chainId:r,nonce:o,maxPriorityFeePerGas:i,maxFeePerGas:c,gas:u,to:m,value:f,data:h,accessList:d,...s.length>9?{v:p,r:_,s:b}:{}},serializedTransaction:e,type:"eip4844"});const E={blobVersionedHashes:g,chainId:A(r),type:"eip4844"};return w(m)&&m!=="0x"&&(E.to=m),w(u)&&u!=="0x"&&(E.gas=x(u)),w(h)&&h!=="0x"&&(E.data=h),w(o)&&o!=="0x"&&(E.nonce=A(o)),w(f)&&f!=="0x"&&(E.value=x(f)),w(l)&&l!=="0x"&&(E.maxFeePerBlobGas=x(l)),w(c)&&c!=="0x"&&(E.maxFeePerGas=x(c)),w(i)&&i!=="0x"&&(E.maxPriorityFeePerGas=x(i)),d.length!==0&&d!=="0x"&&(E.accessList=Te(d)),v&&P&&y&&(E.sidecars=us({blobs:v,commitments:P,proofs:y})),dn(E),{...s.length===14?Z(s):void 0,...E}}function zc(e){const t=ve(e),[n,s,a,r,o,i,c,u,m,f,h,d]=t;if(!(t.length===9||t.length===12))throw new V({attributes:{chainId:n,nonce:s,maxPriorityFeePerGas:a,maxFeePerGas:r,gas:o,to:i,value:c,data:u,accessList:m,...t.length>9?{v:f,r:h,s:d}:{}},serializedTransaction:e,type:"eip1559"});const l={chainId:A(n),type:"eip1559"};return w(i)&&i!=="0x"&&(l.to=i),w(o)&&o!=="0x"&&(l.gas=x(o)),w(u)&&u!=="0x"&&(l.data=u),w(s)&&s!=="0x"&&(l.nonce=A(s)),w(c)&&c!=="0x"&&(l.value=x(c)),w(r)&&r!=="0x"&&(l.maxFeePerGas=x(r)),w(a)&&a!=="0x"&&(l.maxPriorityFeePerGas=x(a)),m.length!==0&&m!=="0x"&&(l.accessList=Te(m)),ds(l),{...t.length===12?Z(t):void 0,...l}}function Wc(e){const t=ve(e),[n,s,a,r,o,i,c,u,m,f,h]=t;if(!(t.length===8||t.length===11))throw new V({attributes:{chainId:n,nonce:s,gasPrice:a,gas:r,to:o,value:i,data:c,accessList:u,...t.length>8?{v:m,r:f,s:h}:{}},serializedTransaction:e,type:"eip2930"});const d={chainId:A(n),type:"eip2930"};return w(o)&&o!=="0x"&&(d.to=o),w(r)&&r!=="0x"&&(d.gas=x(r)),w(c)&&c!=="0x"&&(d.data=c),w(s)&&s!=="0x"&&(d.nonce=A(s)),w(i)&&i!=="0x"&&(d.value=x(i)),w(a)&&a!=="0x"&&(d.gasPrice=x(a)),u.length!==0&&u!=="0x"&&(d.accessList=Te(u)),ls(d),{...t.length===11?Z(t):void 0,...d}}function Kc(e){const t=it(e,"hex"),[n,s,a,r,o,i,c,u,m]=t;if(!(t.length===6||t.length===9))throw new V({attributes:{nonce:n,gasPrice:s,gas:a,to:r,value:o,data:i,...t.length>6?{v:c,r:u,s:m}:{}},serializedTransaction:e,type:"legacy"});const f={type:"legacy"};if(w(r)&&r!=="0x"&&(f.to=r),w(a)&&a!=="0x"&&(f.gas=x(a)),w(i)&&i!=="0x"&&(f.data=i),w(n)&&n!=="0x"&&(f.nonce=A(n)),w(o)&&o!=="0x"&&(f.value=x(o)),w(s)&&s!=="0x"&&(f.gasPrice=x(s)),fs(f),t.length===6)return f;const h=w(c)&&c!=="0x"?x(c):0n;if(m==="0x"&&u==="0x")return h>0&&(f.chainId=Number(h)),f;const d=h,l=Number((d-35n)/2n);if(l>0)f.chainId=l;else if(d!==27n&&d!==28n)throw new hs({v:d});return f.v=d,f.s=m,f.r=u,f.yParity=d%2n===0n?1:0,f}function ve(e){return it(`0x${e.slice(4)}`,"hex")}function Te(e){const t=[];for(let n=0;n<e.length;n++){const[s,a]=e[n];if(!tt(s,{strict:!1}))throw new st({address:s});t.push({address:s,storageKeys:a.map(r=>Ls(r)?r:ms(r))})}return t}function Jc(e){const t=[];for(let n=0;n<e.length;n++){const[s,a,r,o,i,c]=e[n];t.push({chainId:A(s),contractAddress:a,nonce:A(r),...Z([o,i,c])})}return t}function Z(e){const t=e.slice(-3),n=t[0]==="0x"||x(t[0])===0n?27n:28n;return{r:ze(t[1],{size:32}),s:ze(t[2],{size:32}),v:n,yParity:n===27n?0:1}}class Ds extends ge{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function ct(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new Ds({value:e});let[n,s="0"]=e.split(".");const a=n.startsWith("-");if(a&&(n=n.slice(1)),s=s.replace(/(0+)$/,""),t===0)Math.round(+`.${s}`)===1&&(n=`${BigInt(n)+1n}`),s="";else if(s.length>t){const[r,o,i]=[s.slice(0,t-1),s.slice(t-1,t),s.slice(t)],c=Math.round(+`${o}.${i}`);c>9?s=`${BigInt(r)+BigInt(1)}0`.padStart(r.length+1,"0"):s=`${r}${c}`,s.length>t&&(s=s.slice(1),n=`${BigInt(n)+1n}`),s=s.slice(0,t)}else s=s.padEnd(t,"0");return BigInt(`${a?"-":""}${n}${s}`)}function Yc(e,t="wei"){return ct(e,gs[t])}function Qc(e,t="wei"){return ct(e,ps[t])}function Fs(e){const{source:t}=e,n=new Map,s=new Bt(8192),a=new Map,r=({address:o,chainId:i})=>`${o}.${i}`;return{async consume({address:o,chainId:i,client:c}){const u=r({address:o,chainId:i}),m=this.get({address:o,chainId:i,client:c});this.increment({address:o,chainId:i});const f=await m;return await t.set({address:o,chainId:i},f),s.set(u,f),f},async increment({address:o,chainId:i}){const c=r({address:o,chainId:i}),u=n.get(c)??0;n.set(c,u+1)},async get({address:o,chainId:i,client:c}){const u=r({address:o,chainId:i});let m=a.get(u);return m||(m=(async()=>{try{const h=await t.get({address:o,chainId:i,client:c}),d=s.get(u)??0;return d>0&&h<=d?d+1:(s.delete(u),h)}finally{this.reset({address:o,chainId:i})}})(),a.set(u,m)),(n.get(u)??0)+await m},reset({address:o,chainId:i}){const c=r({address:o,chainId:i});n.delete(c),a.delete(c)}}}function Xc(){return{async get(e){const{address:t,client:n}=e;return ln(n,{address:t,blockTag:"pending"})},set(){}}}const Zc=Fs({source:Xc()});async function eu(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>N(n))}async function tu(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function su(e,{hash:t}){await e.request({method:`${e.mode}_dropTransaction`,params:[t]})}async function nu(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}async function au(e){return await e.request({method:"txpool_content"})}async function ru(e){const{pending:t,queued:n}=await e.request({method:"txpool_status"});return{pending:A(t),queued:A(n)}}async function ou(e){return await e.request({method:"txpool_inspect"})}async function iu(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}async function cu(e,{blockNumber:t,jsonRpcUrl:n}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(t),jsonRpcUrl:n}}]})}async function uu(e,{id:t}){await e.request({method:"evm_revert",params:[t]})}async function du(e,t){var u,m,f,h;const{account:n=e.account,chain:s=e.chain,...a}=t;if(!n)throw new me({docsPath:"/docs/actions/wallet/signTransaction"});const r=ye(n);Je({account:r,...t});const o=await B(e,Ye,"getChainId")({});s!==null&&rt({currentChainId:o,chain:s});const i=(s==null?void 0:s.formatters)||((u=e.chain)==null?void 0:u.formatters),c=((m=i==null?void 0:i.transactionRequest)==null?void 0:m.format)||pe;return r.signTransaction?r.signTransaction({...a,chainId:o},{serializer:(h=(f=e.chain)==null?void 0:f.serializers)==null?void 0:h.transaction}):await e.request({method:"eth_signTransaction",params:[{...c(a),chainId:S(o),from:r.address}]},{retryCount:0})}async function lu(e,t){var _,b,v;const{accessList:n,data:s,from:a,gas:r,gasPrice:o,maxFeePerGas:i,maxPriorityFeePerGas:c,nonce:u,to:m,value:f,...h}=t,d=(v=(b=(_=e.chain)==null?void 0:_.formatters)==null?void 0:b.transactionRequest)==null?void 0:v.format,g=(d||pe)({...Lt(h,{format:d}),accessList:n,data:s,from:a,gas:r,gasPrice:o,maxFeePerGas:i,maxPriorityFeePerGas:c,nonce:u,to:m,value:f});return await e.request({method:"eth_sendUnsignedTransaction",params:[g]})}async function fu(e,{address:t,value:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountBalance",params:[t,S(n)]}):await e.request({method:`${e.mode}_setBalance`,params:[t,S(n)]})}async function hu(e,t){e.mode==="ganache"?t?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[t]})}async function mu(e,{gasLimit:t}){await e.request({method:"evm_setBlockGasLimit",params:[S(t)]})}async function gu(e,{interval:t}){const n=e.mode==="hardhat"?t*1e3:t;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[n]})}async function pu(e,{address:t,bytecode:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[t,n]}):await e.request({method:`${e.mode}_setCode`,params:[t,n]})}async function yu(e,{address:t}){await e.request({method:`${e.mode}_setCoinbase`,params:[t]})}async function bu(e,{interval:t}){const n=e.mode==="hardhat"?t*1e3:t;await e.request({method:"evm_setIntervalMining",params:[n]})}async function wu(e,t){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[t]})}async function _u(e,{gasPrice:t}){await e.request({method:`${e.mode}_setMinGasPrice`,params:[S(t)]})}async function Eu(e,{baseFeePerGas:t}){await e.request({method:`${e.mode}_setNextBlockBaseFeePerGas`,params:[S(t)]})}async function vu(e,{timestamp:t}){await e.request({method:"evm_setNextBlockTimestamp",params:[S(t)]})}async function Tu(e,{address:t,nonce:n}){await e.request({method:`${e.mode}_setNonce`,params:[t,S(n)]})}async function xu(e,t){await e.request({method:`${e.mode}_setRpcUrl`,params:[t]})}async function Pu(e,{address:t,index:n,value:s}){await e.request({method:`${e.mode}_setStorageAt`,params:[t,typeof n=="number"?S(n):n,s]})}async function Su(e){return await e.request({method:"evm_snapshot"})}async function Iu(e,t){const{account:n=e.account,domain:s,message:a,primaryType:r}=t;if(!n)throw new me({docsPath:"/docs/actions/wallet/signTypedData"});const o=ye(n),i={EIP712Domain:ys({domain:s}),...t.types};if(bs({domain:s,message:a,primaryType:r,types:i}),o.signTypedData)return o.signTypedData({domain:s,message:a,primaryType:r,types:i});const c=ws({domain:s,message:a,primaryType:r,types:i});return e.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function Cu(e,{address:t}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[t]})}async function Au(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:S(t)}]},{retryCount:0})}async function Ru(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function Hs(e,t){const{abi:n,account:s=e.account,address:a,args:r,dataSuffix:o,functionName:i,...c}=t;if(typeof s>"u")throw new me({docsPath:"/docs/contract/writeContract"});const u=s?ye(s):null,m=_s({abi:n,args:r,functionName:i});try{return await B(e,ot,"sendTransaction")({data:`${m}${o?o.replace("0x",""):""}`,to:a,account:u,...c})}catch(f){throw Es(f,{abi:n,address:a,args:r,docsPath:"/docs/contract/writeContract",functionName:i,sender:u==null?void 0:u.address})}}function ku({abi:e,address:t,client:n}){const s=n,[a,r]=s?"public"in s&&"wallet"in s?[s.public,s.wallet]:"public"in s?[s.public,void 0]:"wallet"in s?[void 0,s.wallet]:[s,s]:[void 0,void 0],o=a!=null,i=r!=null,c={};let u=!1,m=!1,f=!1;for(const h of e)if(h.type==="function"?h.stateMutability==="view"||h.stateMutability==="pure"?u=!0:m=!0:h.type==="event"&&(f=!0),u&&m&&f)break;return o&&(u&&(c.read=new Proxy({},{get(h,d){return(...l)=>{const{args:g,options:p}=ae(l);return B(a,fn,"readContract")({abi:e,address:t,functionName:d,args:g,...p})}}})),m&&(c.simulate=new Proxy({},{get(h,d){return(...l)=>{const{args:g,options:p}=ae(l);return B(a,hn,"simulateContract")({abi:e,address:t,functionName:d,args:g,...p})}}})),f&&(c.createEventFilter=new Proxy({},{get(h,d){return(...l)=>{const g=e.find(b=>b.type==="event"&&b.name===d),{args:p,options:_}=De(l,g);return B(a,mn,"createContractEventFilter")({abi:e,address:t,eventName:d,args:p,..._})}}}),c.getEvents=new Proxy({},{get(h,d){return(...l)=>{const g=e.find(b=>b.type==="event"&&b.name===d),{args:p,options:_}=De(l,g);return B(a,gn,"getContractEvents")({abi:e,address:t,eventName:d,args:p,..._})}}}),c.watchEvent=new Proxy({},{get(h,d){return(...l)=>{const g=e.find(b=>b.type==="event"&&b.name===d),{args:p,options:_}=De(l,g);return B(a,pn,"watchContractEvent")({abi:e,address:t,eventName:d,args:p,..._})}}}))),i&&m&&(c.write=new Proxy({},{get(h,d){return(...l)=>{const{args:g,options:p}=ae(l);return B(r,Hs,"writeContract")({abi:e,address:t,functionName:d,args:g,...p})}}})),(o||i)&&m&&(c.estimateGas=new Proxy({},{get(h,d){return(...l)=>{const{args:g,options:p}=ae(l);return B(a??r,yn,"estimateContractGas")({abi:e,address:t,functionName:d,args:g,...p,account:p.account??r.account})}}})),c.address=t,c.abi=e,c}function ae(e){const t=e.length&&Array.isArray(e[0]),n=t?e[0]:[],s=(t?e[1]:e[0])??{};return{args:n,options:s}}function De(e,t){let n=!1;Array.isArray(e[0])?n=!0:e.length===1?n=t.inputs.some(r=>r.indexed):e.length===2&&(n=!0);const s=n?e[0]:void 0,a=(n?e[1]:e[0])??{};return{args:s,options:a}}function Mu(e,t={}){const{key:n="fallback",name:s="Fallback",rank:a=!1,retryCount:r,retryDelay:o}=t;return({chain:i,pollingInterval:c=4e3,timeout:u,...m})=>{let f=e,h=()=>{};const d=nt({key:n,name:s,async request({method:l,params:g}){const p=async(_=0)=>{const b=f[_]({...m,chain:i,retryCount:0,timeout:u});try{const v=await b.request({method:l,params:g});return h({method:l,params:g,response:v,transport:b,status:"success"}),v}catch(v){if(h({error:v,method:l,params:g,transport:b,status:"error"}),Bu(v)||_===f.length-1)throw v;return p(_+1)}};return p()},retryCount:r,retryDelay:o,type:"fallback"},{onResponse:l=>h=l,transports:f.map(l=>l({chain:i,retryCount:0}))});if(a){const l=typeof a=="object"?a:{};Lu({chain:i,interval:l.interval??c,onTransports:g=>f=g,sampleCount:l.sampleCount,timeout:l.timeout,transports:f,weights:l.weights})}return d}}function Bu(e){return"code"in e&&typeof e.code=="number"&&(e.code===vs.code||e.code===Ts.code||e.code===5e3)}function Lu({chain:e,interval:t=4e3,onTransports:n,sampleCount:s=10,timeout:a=1e3,transports:r,weights:o={}}){const{stability:i=.7,latency:c=.3}=o,u=[],m=async()=>{const f=await Promise.all(r.map(async l=>{const g=l({chain:e,retryCount:0,timeout:a}),p=Date.now();let _,b;try{await g.request({method:"net_listening"}),b=1}catch{b=0}finally{_=Date.now()}return{latency:_-p,success:b}}));u.push(f),u.length>s&&u.shift();const h=Math.max(...u.map(l=>Math.max(...l.map(({latency:g})=>g)))),d=r.map((l,g)=>{const p=u.map(y=>y[g].latency),b=1-p.reduce((y,E)=>y+E,0)/p.length/h,v=u.map(y=>y[g].success),P=v.reduce((y,E)=>y+E,0)/v.length;return P===0?[0,g]:[c*b+i*P,g]}).sort((l,g)=>g[0]-l[0]);n(d.map(([,l])=>r[l])),await bn(t),m()};m()}function qu(e){const{key:t="public",name:n="Public Client"}=e;return Ee({...e,key:t,name:n,type:"publicClient"}).extend(xs)}function Us({mode:e}){return t=>{const n=t.extend(()=>({mode:e}));return{dropTransaction:s=>su(n,s),dumpState:()=>Tc(n),getAutomine:()=>nu(n),getTxpoolContent:()=>au(n),getTxpoolStatus:()=>ru(n),impersonateAccount:s=>xc(n,s),increaseTime:s=>Pc(n,s),inspectTxpool:()=>ou(n),loadState:s=>Sc(n,s),mine:s=>Ic(n,s),removeBlockTimestampInterval:()=>iu(n),reset:s=>cu(n,s),revert:s=>uu(n,s),sendUnsignedTransaction:s=>lu(n,s),setAutomine:s=>hu(n,s),setBalance:s=>fu(n,s),setBlockGasLimit:s=>mu(n,s),setBlockTimestampInterval:s=>gu(n,s),setCode:s=>pu(n,s),setCoinbase:s=>yu(n,s),setIntervalMining:s=>bu(n,s),setLoggingEnabled:s=>wu(n,s),setMinGasPrice:s=>_u(n,s),setNextBlockBaseFeePerGas:s=>Eu(n,s),setNextBlockTimestamp:s=>vu(n,s),setNonce:s=>Tu(n,s),setRpcUrl:s=>xu(n,s),setStorageAt:s=>Pu(n,s),snapshot:()=>Su(n),stopImpersonatingAccount:s=>Cu(n,s)}}}function Nu(e){const{key:t="test",name:n="Test Client",mode:s}=e;return Ee({...e,key:t,name:n,type:"testClient"}).extend(r=>({mode:s,...Us({mode:s})(r)}))}function $s(e){return{addChain:t=>yc(e,t),deployContract:t=>wc(e,t),getAddresses:()=>Cc(e),getChainId:()=>Ye(e),getPermissions:()=>Ac(e),prepareTransactionRequest:t=>qt(e,t),requestAddresses:()=>eu(e),requestPermissions:t=>tu(e,t),sendRawTransaction:t=>Nt(e,t),sendTransaction:t=>ot(e,t),signMessage:t=>wn(e,t),signTransaction:t=>du(e,t),signTypedData:t=>Iu(e,t),switchChain:t=>Au(e,t),watchAsset:t=>Ru(e,t),writeContract:t=>Hs(e,t)}}function Ou(e){const{key:t="wallet",name:n="Wallet Client",transport:s}=e;return Ee({...e,key:t,name:n,transport:s,type:"walletClient"}).extend($s)}function ju(e,t={}){const{keepAlive:n,key:s="webSocket",name:a="WebSocket JSON-RPC",reconnect:r,retryDelay:o}=t;return({chain:i,retryCount:c,timeout:u})=>{var d;const m=t.retryCount??c,f=u??t.timeout??1e4,h=e||((d=i==null?void 0:i.rpcUrls.default.webSocket)==null?void 0:d[0]);if(!h)throw new Ps;return nt({key:s,name:a,async request({method:l,params:g}){const p={method:l,params:g},_=await ce(h,{keepAlive:n,reconnect:r}),{error:b,result:v}=await _.requestAsync({body:p,timeout:f});if(b)throw new Ss({body:p,error:b,url:h});return v},retryCount:m,retryDelay:o,timeout:f,type:"webSocket"},{getSocket(){return Mc(h)},getRpcClient(){return ce(h)},async subscribe({params:l,onData:g,onError:p}){const _=await ce(h),{result:b}=await new Promise((v,P)=>_.request({body:{method:"eth_subscribe",params:l},onError(y){P(y),p==null||p(y)},onResponse(y){if(y.error){P(y.error),p==null||p(y.error);return}if(typeof y.id=="number"){v(y);return}y.method==="eth_subscription"&&g(y.params)}}));return{subscriptionId:b,async unsubscribe(){return new Promise(v=>_.request({body:{method:"eth_unsubscribe",params:[b]},onResponse:v}))}}}})}}const Du="0x0000000000000000000000000000000000000000";class Fu extends Error{constructor(t,n){super(n),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=n}}const Fe="/docs/contract/decodeDeployData";function Hu(e){const{abi:t,bytecode:n,data:s}=e;if(s===n)return{bytecode:n};const a=t.find(o=>"type"in o&&o.type==="constructor");if(!a)throw new Is({docsPath:Fe});if(!("inputs"in a))throw new We({docsPath:Fe});if(!a.inputs||a.inputs.length===0)throw new We({docsPath:Fe});return{args:be(a.inputs,`0x${s.replace(n,"")}`),bytecode:n}}function Uu({r:e,yParityAndS:t}){const n=Q(t),s=n[0]&128?1:0,a=n;return s===1&&(a[0]&=127),{r:e,s:U(a),yParity:s}}function _t(e){const{r:t,s:n}=at.Signature.fromCompact(e.slice(2,130));return{r:S(t,{size:32}),yParityAndS:S(n,{size:32})}}function Et(e){const{r:t,s:n}=at.Signature.fromCompact(e.slice(2,130)),s=+`0x${e.slice(130)}`,[a,r]=(()=>{if(s===0||s===1)return[void 0,s];if(s===27)return[BigInt(s),0];if(s===28)return[BigInt(s),1];throw new Error("Invalid yParityOrV value")})();return typeof a<"u"?{r:S(t,{size:32}),s:S(n,{size:32}),v:a,yParity:r}:{r:S(t,{size:32}),s:S(n,{size:32}),yParity:r}}async function $u(e){const{serializedTransaction:t,signature:n}=e,s=js(t),a=n??{r:s.r,s:s.s,v:s.v,yParity:s.yParity},r=Cs({...s,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await X({hash:Y(r),signature:a})}function Gu(e){const{r:t,s:n,v:s,yParity:a}=e,r=Number(a??s-27n);let o=n;if(r===1){const i=Q(n);i[0]|=128,o=U(i)}return{r:t,yParityAndS:o}}function vt({r:e,yParityAndS:t}){return`0x${new at.Signature(x(e),x(t)).toCompactHex()}`}function Vu(e){const{sidecars:t,version:n}=e,s=e.to??(typeof t[0].blob=="string"?"hex":"bytes"),a=[];for(const{commitment:r}of t)a.push(As({commitment:r,to:s,version:n}));return a}function zu(e){const t=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),n=typeof e.blobs[0]=="string"?e.blobs.map(i=>Q(i)):e.blobs,s=n.reduce((i,c)=>i+c.length,0),a=Ve(new Uint8Array(s));let r=!0;for(const i of n){const c=Ve(i);for(;r&&c.position<i.length;){c.incrementPosition(1);let u=31;i.length-c.position<31&&(u=i.length-c.position);for(const m in Array.from({length:u})){const f=c.readByte();if(f===128&&!c.inspectBytes(c.remaining).includes(128)){r=!1;break}a.pushByte(f)}}}const o=a.bytes.slice(0,a.position);return t==="hex"?U(o):o}function Gs({blobToKzgCommitment:e,computeBlobKzgProof:t}){return{blobToKzgCommitment:e,computeBlobKzgProof:t}}function Wu(e,t){try{e.loadTrustedSetup(t)}catch(n){const s=n;if(!s.message.includes("trusted setup is already loaded"))throw s}return Gs(e)}const Ku=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:Is,AbiConstructorParamsNotFoundError:We,AbiDecodingDataSizeInvalidError:_n,AbiDecodingDataSizeTooSmallError:En,AbiDecodingZeroDataError:vn,AbiEncodingArrayLengthMismatchError:Tn,AbiEncodingBytesSizeMismatchError:xn,AbiEncodingLengthMismatchError:Kt,AbiErrorInputsNotFoundError:zt,AbiErrorNotFoundError:$e,AbiErrorSignatureNotFoundError:Pn,AbiEventNotFoundError:Sn,AbiEventSignatureEmptyTopicsError:In,AbiEventSignatureNotFoundError:Cn,AbiFunctionNotFoundError:Ge,AbiFunctionOutputsNotFoundError:Wt,AbiFunctionSignatureNotFoundError:Vt,AccountStateConflictError:An,BaseError:ge,BaseFeeScalarError:Rn,BlockNotFoundError:kn,BytesSizeMismatchError:Qt,CallExecutionError:Mn,ChainDisconnectedError:Bn,ChainDoesNotSupportContract:Ln,ChainMismatchError:Rt,ChainNotFoundError:At,CircularReferenceError:qn,ClientChainNotConfiguredError:Nn,ContractFunctionExecutionError:On,ContractFunctionRevertedError:jn,ContractFunctionZeroDataError:Dn,CounterfactualDeploymentFailedError:Fn,DecodeLogDataMismatch:Hn,DecodeLogTopicsMismatch:Un,EIP1193ProviderRpcError:Fu,Eip1559FeesNotSupportedError:$n,EnsAvatarInvalidNftUriError:Gn,EnsAvatarUnsupportedNamespaceError:Vn,EnsAvatarUriResolutionError:zn,EstimateGasExecutionError:Wn,ExecutionRevertedError:Kn,FeeCapTooHighError:Jn,FeeCapTooLowError:Yn,FeeConflictError:Qn,FilterTypeNotSupportedError:Xn,HttpRequestError:Zn,InsufficientFundsError:ea,IntegerOutOfRangeError:ta,InternalRpcError:sa,IntrinsicGasTooHighError:na,IntrinsicGasTooLowError:aa,InvalidAbiDecodingTypeError:ra,InvalidAbiEncodingTypeError:oa,InvalidAbiItemError:jt,InvalidAbiParameterError:Dt,InvalidAbiParametersError:Ft,InvalidAbiTypeParameterError:ia,InvalidAddressError:st,InvalidArrayError:ca,InvalidBytesBooleanError:ua,InvalidChainIdError:da,InvalidDecimalNumberError:Ds,InvalidDefinitionTypeError:la,InvalidDomainError:fa,InvalidFunctionModifierError:ha,InvalidHexBooleanError:ma,InvalidHexValueError:ts,InvalidInputRpcError:ga,InvalidLegacyVError:hs,InvalidModifierError:pa,InvalidParameterError:ya,InvalidParamsRpcError:ba,InvalidParenthesisError:wa,InvalidPrimaryTypeError:_a,InvalidRequestRpcError:Ea,InvalidSerializableTransactionError:va,InvalidSerializedTransactionError:V,InvalidSerializedTransactionTypeError:cs,InvalidSignatureError:Ta,InvalidStorageKeySizeError:xa,InvalidStructSignatureError:Pa,InvalidStructTypeError:Sa,JsonRpcVersionUnsupportedError:Ia,LimitExceededRpcError:Ca,MaxFeePerGasTooLowError:Aa,MethodNotFoundRpcError:Ra,MethodNotSupportedRpcError:ka,NonceMaxValueError:Ma,NonceTooHighError:Ba,NonceTooLowError:La,ParseRpcError:qa,ProviderDisconnectedError:Na,ProviderRpcError:Oa,RawContractError:ja,ResourceNotFoundRpcError:Da,ResourceUnavailableRpcError:Fa,RpcError:Ha,RpcRequestError:Ss,SizeExceedsPaddingSizeError:Ua,SizeOverflowError:$a,SliceOffsetOutOfBoundsError:Ga,SocketClosedError:J,SolidityProtectedKeywordError:Va,StateAssignmentConflictError:za,SwitchChainError:Wa,TimeoutError:$t,TipAboveFeeCapError:Ka,TransactionExecutionError:Mt,TransactionNotFoundError:Ja,TransactionReceiptNotFoundError:Ya,TransactionRejectedRpcError:vs,TransactionTypeNotSupportedError:Qa,UnauthorizedProviderError:Xa,UnknownNodeError:kt,UnknownRpcError:Za,UnknownSignatureError:er,UnknownTypeError:tr,UnsupportedPackedAbiType:Xt,UnsupportedProviderMethodError:sr,UrlRequiredError:Ps,UserRejectedRequestError:Ts,WaitForTransactionReceiptTimeoutError:nr,WebSocketRequestError:Ue,assertCurrentChain:rt,assertRequest:Je,assertTransactionEIP1559:ds,assertTransactionEIP2930:ls,assertTransactionLegacy:fs,blobsToCommitments:ar,blobsToProofs:rr,boolToBytes:or,boolToHex:Yt,bytesToBigInt:ir,bytesToBool:cr,bytesToHex:U,bytesToNumber:ur,bytesToRlp:dr,bytesToString:lr,ccipFetch:bt,ccipRequest:bt,checksumAddress:Ht,commitmentToVersionedHash:As,commitmentsToVersionedHashes:fr,compactSignatureToHex:vt,compactSignatureToSignature:Uu,concat:es,concatBytes:hr,concatHex:we,createClient:Ee,createNonceManager:Fs,createPublicClient:qu,createTestClient:Nu,createTransport:nt,createWalletClient:Ou,custom:mr,decodeAbiParameters:be,decodeDeployData:Hu,decodeErrorResult:gr,decodeEventLog:pr,decodeFunctionData:Bc,decodeFunctionResult:yr,defineBlock:br,defineChain:wr,defineKzg:Gs,defineTransaction:_r,defineTransactionReceipt:Er,defineTransactionRequest:vr,deploylessCallViaBytecodeBytecode:Tr,deploylessCallViaFactoryBytecode:xr,domainSeparator:Pr,encodeAbiParameters:et,encodeDeployData:Ot,encodeErrorResult:Lc,encodeEventTopics:Sr,encodeFunctionData:_s,encodeFunctionResult:qc,encodePacked:Nc,erc20Abi:Ir,erc20Abi_bytes32:Cr,erc4626Abi:Ar,erc721Abi:Rr,etherUnits:gs,extractChain:Rc,fallback:Mu,formatBlock:kr,formatEther:Mr,formatGwei:Br,formatLog:Lr,formatTransaction:qr,formatTransactionReceipt:Nr,formatTransactionRequest:pe,formatUnits:Or,fromBlobs:zu,fromBytes:jr,fromHex:Dr,fromRlp:it,getAbiItem:Ze,getAddress:N,getChainContractAddress:Fr,getContract:ku,getContractAddress:Oc,getContractError:Es,getCreate2Address:Ms,getCreateAddress:ks,getEventSelector:gt,getEventSignature:ne,getFunctionSelector:fe,getFunctionSignature:ne,getSerializedTransactionType:Os,getTransactionType:Hr,getTypesForEIP712Domain:ys,gweiUnits:ps,hashDomain:Ur,hashMessage:as,hashTypedData:rs,hexToBigInt:x,hexToBool:$r,hexToBytes:Q,hexToCompactSignature:_t,hexToNumber:A,hexToRlp:Gr,hexToSignature:Et,hexToString:Vr,http:zr,isAddress:tt,isAddressEqual:_e,isBytes:Ke,isErc6492Signature:os,isHash:Ls,isHex:w,keccak256:Y,labelhash:Wr,maxInt104:Kr,maxInt112:Jr,maxInt120:Yr,maxInt128:Qr,maxInt136:Xr,maxInt144:Zr,maxInt152:eo,maxInt16:to,maxInt160:so,maxInt168:no,maxInt176:ao,maxInt184:ro,maxInt192:oo,maxInt200:io,maxInt208:co,maxInt216:uo,maxInt224:lo,maxInt232:fo,maxInt24:ho,maxInt240:mo,maxInt248:go,maxInt256:po,maxInt32:yo,maxInt40:bo,maxInt48:wo,maxInt56:_o,maxInt64:Eo,maxInt72:vo,maxInt8:To,maxInt80:xo,maxInt88:Po,maxInt96:So,maxUint104:Io,maxUint112:Co,maxUint120:Ao,maxUint128:Ro,maxUint136:ko,maxUint144:Mo,maxUint152:Bo,maxUint16:Lo,maxUint160:qo,maxUint168:No,maxUint176:Oo,maxUint184:jo,maxUint192:Do,maxUint200:Fo,maxUint208:Ho,maxUint216:Uo,maxUint224:$o,maxUint232:Go,maxUint24:Vo,maxUint240:zo,maxUint248:Wo,maxUint256:Ko,maxUint32:Jo,maxUint40:Yo,maxUint48:Qo,maxUint56:Xo,maxUint64:Zo,maxUint72:ei,maxUint8:ti,maxUint80:si,maxUint88:ni,maxUint96:ai,minInt104:ri,minInt112:oi,minInt120:ii,minInt128:ci,minInt136:ui,minInt144:di,minInt152:li,minInt16:fi,minInt160:hi,minInt168:mi,minInt176:gi,minInt184:pi,minInt192:yi,minInt200:bi,minInt208:wi,minInt216:_i,minInt224:Ei,minInt232:vi,minInt24:Ti,minInt240:xi,minInt248:Pi,minInt256:Si,minInt32:Ii,minInt40:Ci,minInt48:Ai,minInt56:Ri,minInt64:ki,minInt72:Mi,minInt8:Bi,minInt80:Li,minInt88:qi,minInt96:Ni,multicall3Abi:Oi,namehash:ji,nonceManager:Zc,numberToBytes:Di,numberToHex:S,offchainLookup:fc,offchainLookupAbiItem:hc,offchainLookupSignature:mc,pad:K,padBytes:Fi,padHex:ze,parseAbi:Hi,parseAbiItem:_c,parseAbiParameter:Ec,parseAbiParameters:vc,parseCompactSignature:_t,parseErc6492Signature:$c,parseEther:Yc,parseEventLogs:Ui,parseGwei:Qc,parseSignature:Et,parseTransaction:js,parseUnits:ct,prepareEncodeFunctionData:$i,presignMessagePrefix:Gi,publicActions:xs,recoverAddress:X,recoverMessageAddress:qs,recoverPublicKey:Vi,recoverTransactionAddress:$u,recoverTypedDataAddress:Ns,ripemd160:Dc,rpcSchema:zi,rpcTransactionType:Wi,serializeAccessList:Ki,serializeCompactSignature:vt,serializeErc6492Signature:Ji,serializeSignature:pt,serializeTransaction:Cs,serializeTypedData:ws,setErrorConfig:Yi,setupKzg:Wu,sha256:Qi,sidecarsToVersionedHashes:Vu,signatureToCompactSignature:Gu,signatureToHex:pt,size:ss,slice:le,sliceBytes:Xi,sliceHex:is,stringToBytes:Zi,stringToHex:Jt,stringify:ec,testActions:Us,toBlobSidecars:us,toBlobs:tc,toBytes:j,toEventHash:yt,toEventSelector:gt,toEventSignature:ne,toFunctionHash:yt,toFunctionSelector:fe,toFunctionSignature:ne,toHex:ns,toPrefixedMessage:sc,toRlp:Zt,transactionType:nc,trim:ms,universalSignatureValidatorAbi:ac,universalSignatureValidatorByteCode:rc,validateTypedData:bs,verifyHash:Fc,verifyMessage:Hc,verifyTypedData:Uc,walletActions:$s,webSocket:ju,weiUnits:oc,withRetry:ic,withTimeout:Ut,zeroAddress:Du,zeroHash:cc},Symbol.toStringTag,{value:"Module"}));var ut={},xe={},Vs={},he={},zs={},ee={},te={};Object.defineProperty(te,"__esModule",{value:!0});te.getSDKVersion=void 0;const Ju=()=>"9.1.0";te.getSDKVersion=Ju;var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.generateRequestId=void 0;const Yu=e=>e.toString(16).padStart(2,"0"),Qu=e=>{const t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,Yu).join("")},Xu=()=>typeof window<"u"?Qu(10):new Date().getTime().toString(36);Pe.generateRequestId=Xu;Object.defineProperty(ee,"__esModule",{value:!0});ee.MessageFormatter=void 0;const Zu=te,ed=Pe;class Se{}ee.MessageFormatter=Se;Se.makeRequest=(e,t)=>({id:(0,ed.generateRequestId)(),method:e,params:t,env:{sdkVersion:(0,Zu.getSDKVersion)()}});Se.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t});Se.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n});var L={};Object.defineProperty(L,"__esModule",{value:!0});L.RestrictedMethods=L.Methods=void 0;var Tt;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(Tt||(L.Methods=Tt={}));var xt;(function(e){e.requestAddressBook="requestAddressBook"})(xt||(L.RestrictedMethods=xt={}));(function(e){var t=I&&I.__createBinding||(Object.create?function(r,o,i,c){c===void 0&&(c=i);var u=Object.getOwnPropertyDescriptor(o,i);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(r,c,u)}:function(r,o,i,c){c===void 0&&(c=i),r[c]=o[i]}),n=I&&I.__exportStar||function(r,o){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,r,i)};Object.defineProperty(e,"__esModule",{value:!0});const s=ee;class a{constructor(o=null,i=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:c,data:u,source:m})=>{const f=!u,h=!this.isServer&&m===window.parent,d=typeof u.version<"u"&&parseInt(u.version.split(".")[0]),l=typeof d=="number"&&d>=1;let g=!0;return Array.isArray(this.allowedOrigins)&&(g=this.allowedOrigins.find(p=>p.test(c))!==void 0),!f&&h&&l&&g},this.logIncomingMessage=c=>{console.info(`Safe Apps SDK v1: A message was received from origin ${c.origin}. `,c.data)},this.onParentMessage=c=>{this.isValidMessage(c)&&(this.debugMode&&this.logIncomingMessage(c),this.handleIncomingMessage(c.data))},this.handleIncomingMessage=c=>{const{id:u}=c,m=this.callbacks.get(u);m&&(m(c),this.callbacks.delete(u))},this.send=(c,u)=>{const m=s.MessageFormatter.makeRequest(c,u);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(m,"*"),new Promise((f,h)=>{this.callbacks.set(m.id,d=>{if(!d.success){h(new Error(d.error));return}f(d)})})},this.allowedOrigins=o,this.debugMode=i,this.isServer||window.addEventListener("message",this.onParentMessage)}}e.default=a,n(L,e)})(zs);var Ie={},Ce={},Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.isObjectEIP712TypedData=void 0;const td=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;Ae.isObjectEIP712TypedData=td;var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});var Ks={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransferDirection=e.TransactionStatus=e.TokenType=e.Operation=void 0;var t=lc;Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return t.Operation}}),Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return t.TokenType}}),Object.defineProperty(e,"TransactionStatus",{enumerable:!0,get:function(){return t.TransactionStatus}}),Object.defineProperty(e,"TransferDirection",{enumerable:!0,get:function(){return t.TransferDirection}})})(Ks);var Js={};Object.defineProperty(Js,"__esModule",{value:!0});(function(e){var t=I&&I.__createBinding||(Object.create?function(s,a,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(a,r);(!i||("get"in i?!a.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(s,o,i)}:function(s,a,r,o){o===void 0&&(o=r),s[o]=a[r]}),n=I&&I.__exportStar||function(s,a){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(a,r)&&t(a,s,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ae,e),n(Ws,e),n(Ks,e),n(Js,e)})(Ce);Object.defineProperty(Ie,"__esModule",{value:!0});Ie.TXs=void 0;const re=L,sd=Ce;class nd{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(re.Methods.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const n={message:t};return(await this.communicator.send(re.Methods.signMessage,n)).data}async signTypedMessage(t){if(!(0,sd.isObjectEIP712TypedData)(t))throw new Error("Invalid typed data");return(await this.communicator.send(re.Methods.signTypedMessage,{typedData:t})).data}async send({txs:t,params:n}){if(!t||!t.length)throw new Error("No transactions were passed");const s={txs:t,params:n};return(await this.communicator.send(re.Methods.sendTransactions,s)).data}}Ie.TXs=nd;var Re={},z={};Object.defineProperty(z,"__esModule",{value:!0});z.RPC_CALLS=void 0;z.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"};Object.defineProperty(Re,"__esModule",{value:!0});Re.Eth=void 0;const k=z,ad=L,q={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class rd{constructor(t){this.communicator=t,this.call=this.buildRequest({call:k.RPC_CALLS.eth_call,formatters:[null,q.defaultBlockParam]}),this.getBalance=this.buildRequest({call:k.RPC_CALLS.eth_getBalance,formatters:[null,q.defaultBlockParam]}),this.getCode=this.buildRequest({call:k.RPC_CALLS.eth_getCode,formatters:[null,q.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:k.RPC_CALLS.eth_getStorageAt,formatters:[null,q.blockNumberToHex,q.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:k.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:k.RPC_CALLS.eth_getBlockByHash,formatters:[null,q.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:k.RPC_CALLS.eth_getBlockByNumber,formatters:[q.blockNumberToHex,q.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:k.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:k.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:k.RPC_CALLS.eth_getTransactionCount,formatters:[null,q.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:k.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=n=>this.buildRequest({call:k.RPC_CALLS.eth_estimateGas})([n]),this.setSafeSettings=this.buildRequest({call:k.RPC_CALLS.safe_setSettings})}buildRequest(t){const{call:n,formatters:s}=t;return async a=>{s&&Array.isArray(a)&&s.forEach((i,c)=>{i&&(a[c]=i(a[c]))});const r={call:n,params:a||[]};return(await this.communicator.send(ad.Methods.rpcCall,r)).data}}}Re.Eth=rd;var ke={};const od=uc(Ku);var $={};Object.defineProperty($,"__esModule",{value:!0});$.MAGIC_VALUE_BYTES=$.MAGIC_VALUE=void 0;const id="0x1626ba7e";$.MAGIC_VALUE=id;const cd="0x20c13b0b";$.MAGIC_VALUE_BYTES=cd;var dt={},se={},D={};Object.defineProperty(D,"__esModule",{value:!0});D.PermissionsError=D.PERMISSIONS_REQUEST_REJECTED=void 0;D.PERMISSIONS_REQUEST_REJECTED=4001;class lt extends Error{constructor(t,n,s){super(t),this.code=n,this.data=s,Object.setPrototypeOf(this,lt.prototype)}}D.PermissionsError=lt;Object.defineProperty(se,"__esModule",{value:!0});se.Wallet=void 0;const He=L,oe=D;class ud{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(He.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new oe.PermissionsError("Permissions request is invalid",oe.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(He.Methods.wallet_requestPermissions,t)).data}catch{throw new oe.PermissionsError("Permissions rejected",oe.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(t){return t.every(n=>typeof n=="object"?Object.keys(n).every(s=>!!Object.values(He.RestrictedMethods).includes(s)):!1)}}se.Wallet=ud;Object.defineProperty(dt,"__esModule",{value:!0});const dd=se,Pt=D,St=(e,t)=>t.some(n=>n.parentCapability===e),ld=()=>(e,t,n)=>{const s=n.value;return n.value=async function(){const a=new dd.Wallet(this.communicator);let r=await a.getPermissions();if(St(t,r)||(r=await a.requestPermissions([{[t]:{}}])),!St(t,r))throw new Pt.PermissionsError("Permissions rejected",Pt.PERMISSIONS_REQUEST_REJECTED);return s.apply(this)},n};dt.default=ld;var fd=I&&I.__decorate||function(e,t,n,s){var a=arguments.length,r=a<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,n,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},hd=I&&I.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ke,"__esModule",{value:!0});ke.Safe=void 0;const ie=od,It=$,O=L,Ct=z,md=Ce,gd=hd(dt);class Ys{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(O.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(O.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(O.Methods.getSafeBalances,{currency:t})).data}async check1271Signature(t,n="0x"){const s=await this.getInfo(),a=(0,ie.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),r={call:Ct.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:a},"latest"]};try{return(await this.communicator.send(O.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===It.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(t,n="0x"){const s=await this.getInfo(),a=(0,ie.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),r={call:Ct.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:a},"latest"]};try{return(await this.communicator.send(O.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===It.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(t){return(0,ie.hashMessage)(t)}calculateTypedMessageHash(t){const n=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let s=t.primaryType;if(!s){const a=Object.values(t.types),r=Object.keys(t.types).filter(o=>a.every(i=>i.every(({type:c})=>c.replace("[","").replace("]","")!==o)));if(r.length===0||r.length>1)throw new Error("Please specify primaryType");s=r[0]}return(0,ie.hashTypedData)({message:t.message,domain:{...t.domain,chainId:n,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:s})}async getOffChainSignature(t){return(await this.communicator.send(O.Methods.getOffChainSignature,t)).data}async isMessageSigned(t,n="0x"){let s;if(typeof t=="string"&&(s=async()=>{const a=this.calculateMessageHash(t);return await this.isMessageHashSigned(a,n)}),(0,md.isObjectEIP712TypedData)(t)&&(s=async()=>{const a=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(a,n)}),s)return await s();throw new Error("Invalid message type")}async isMessageHashSigned(t,n="0x"){const s=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const a of s)if(await a(t,n))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(O.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(O.Methods.requestAddressBook,void 0)).data}}ke.Safe=Ys;fd([(0,gd.default)()],Ys.prototype,"requestAddressBook",null);var pd=I&&I.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(he,"__esModule",{value:!0});const yd=pd(zs),bd=Ie,wd=Re,_d=ke,Ed=se;class vd{constructor(t={}){const{allowedDomains:n=null,debug:s=!1}=t;this.communicator=new yd.default(n,s),this.eth=new wd.Eth(this.communicator),this.txs=new bd.TXs(this.communicator),this.safe=new _d.Safe(this.communicator),this.wallet=new Ed.Wallet(this.communicator)}}he.default=vd;(function(e){var t=I&&I.__createBinding||(Object.create?function(o,i,c,u){u===void 0&&(u=c);var m=Object.getOwnPropertyDescriptor(i,c);(!m||("get"in m?!i.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return i[c]}}),Object.defineProperty(o,u,m)}:function(o,i,c,u){u===void 0&&(u=c),o[u]=i[c]}),n=I&&I.__exportStar||function(o,i){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(i,c)&&t(i,o,c)},s=I&&I.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSDKVersion=void 0;const a=s(he);e.default=a.default,n(he,e),n(Ce,e),n(L,e),n(ee,e);var r=te;Object.defineProperty(e,"getSDKVersion",{enumerable:!0,get:function(){return r.getSDKVersion}}),n(z,e)})(Vs);var G={};Object.defineProperty(G,"__esModule",{value:!0});G.numberToHex=G.getLowerCase=void 0;function Td(e){return e&&e.toLowerCase()}G.getLowerCase=Td;function xd(e){return`0x${e.toString(16)}`}G.numberToHex=xd;Object.defineProperty(xe,"__esModule",{value:!0});xe.SafeAppProvider=void 0;const H=Vs,Pd=gc,M=G;class Sd extends Pd.EventEmitter{constructor(t,n){super(),this.submittedTxs=new Map,this.safe=t,this.sdk=n}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(t){var a,r,o,i;const{method:n,params:s=[]}=t;switch(n){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,M.numberToHex)(this.chainId);case"personal_sign":{const[h,d]=s;if(this.safe.safeAddress.toLowerCase()!==d.toLowerCase())throw new Error("The address or message hash is invalid");const l=await this.sdk.txs.signMessage(h);return("signature"in l?l.signature:void 0)||"0x"}case"eth_sign":{const[h,d]=s;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase()||!d.startsWith("0x"))throw new Error("The address or message hash is invalid");const l=await this.sdk.txs.signMessage(d);return("signature"in l?l.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[h,d]=s,l=typeof d=="string"?JSON.parse(d):d;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase())throw new Error("The address is invalid");const g=await this.sdk.txs.signTypedMessage(l);return("signature"in g?g.signature:void 0)||"0x"}case"eth_sendTransaction":const c={...s[0],value:s[0].value||"0",data:s[0].data||"0x"};typeof c.gas=="string"&&c.gas.startsWith("0x")&&(c.gas=parseInt(c.gas,16));const u=await this.sdk.txs.send({txs:[c],params:{safeTxGas:c.gas}});return this.submittedTxs.set(u.safeTxHash,{from:this.safe.safeAddress,hash:u.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:c.data,value:c.value,to:c.to,blockHash:null,blockNumber:null,transactionIndex:null}),u.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,M.getLowerCase)(s[0]),s[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,M.getLowerCase)(s[0]),s[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,M.getLowerCase)(s[0]),s[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,M.getLowerCase)(s[0]),s[1],s[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([s[0],s[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([s[0],s[1]]);case"eth_getTransactionByHash":let f=s[0];try{f=(await this.sdk.txs.getBySafeTxHash(f)).txHash||f}catch{}return this.submittedTxs.has(f)?this.submittedTxs.get(f):this.sdk.eth.getTransactionByHash([f]).then(h=>(h&&(h.hash=s[0]),h));case"eth_getTransactionReceipt":{let h=s[0];try{h=(await this.sdk.txs.getBySafeTxHash(h)).txHash||h}catch{}return this.sdk.eth.getTransactionReceipt([h]).then(d=>(d&&(d.transactionHash=s[0]),d))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(s[0]);case"eth_call":return this.sdk.eth.call([s[0],s[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([s[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(s[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([s[0]]);case"wallet_sendCalls":{if(s[0].from!==this.safe.safeAddress)throw Error("Invalid from address");const h=s[0].calls.map((l,g)=>{if(l.chainId!==(0,M.numberToHex)(this.chainId))throw new Error(`Invalid call #${g}: Safe is not on chain ${l.chainId}`);if(!l.to)throw new Error(`Invalid call #${g}: missing "to" field`);return{to:l.to,data:l.data??"0x",value:l.value??(0,M.numberToHex)(0)}}),{safeTxHash:d}=await this.sdk.txs.send({txs:h});return d}case"wallet_getCallsStatus":{const h={[H.TransactionStatus.AWAITING_CONFIRMATIONS]:"PENDING",[H.TransactionStatus.AWAITING_EXECUTION]:"PENDING",[H.TransactionStatus.CANCELLED]:"CONFIRMED",[H.TransactionStatus.FAILED]:"CONFIRMED",[H.TransactionStatus.SUCCESS]:"CONFIRMED"},d=await this.sdk.txs.getBySafeTxHash(s[0]).catch(()=>null);if(!(d!=null&&d.txHash))throw new Error("Transaction not found");const l=await this.sdk.eth.getTransactionReceipt([d.txHash]).catch(()=>null);if(!l)throw new Error("Transaction receipt not found");const g=((r=(a=d.txData)==null?void 0:a.dataDecoded)==null?void 0:r.method)!=="multiSend"?1:((i=(o=d.txData.dataDecoded.parameters)==null?void 0:o[0].valueDecoded)==null?void 0:i.length)??1,p=Number(l.blockNumber),_=Number(l.gasUsed),b=Array(g).fill({success:(0,M.numberToHex)(d.txStatus===H.TransactionStatus.SUCCESS?1:0),blockHash:l.blockHash,blockNumber:(0,M.numberToHex)(p),blockTimestamp:(0,M.numberToHex)(d.executedAt??0),gasUsed:(0,M.numberToHex)(_),transactionHash:d.txHash,logs:l.logs});return{status:h[d.txStatus],receipts:b}}case"wallet_showCallsStatus":throw new Error(`"${t.method}" not supported`);case"wallet_getCapabilities":return{[(0,M.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${t.method}" not implemented`)}}send(t,n){t||n("Undefined request"),this.request(t).then(s=>n(null,{jsonrpc:"2.0",id:t.id,result:s})).catch(s=>n(s,null))}}xe.SafeAppProvider=Sd;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppProvider=void 0;var t=xe;Object.defineProperty(e,"SafeAppProvider",{enumerable:!0,get:function(){return t.SafeAppProvider}})})(ut);const Id=dc(ut),Md=pc({__proto__:null,default:Id},[ut]);export{Md as i};
